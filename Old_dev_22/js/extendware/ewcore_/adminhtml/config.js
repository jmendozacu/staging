FormElementDependenceController=Class.create();FormElementDependenceController.prototype={initialize:function(elementsMap,config){if(config){this._config=config}for(var idTo in elementsMap){for(var idFrom in elementsMap[idTo]){if($(idFrom)){Event.observe($(idFrom),"change",this.trackChange.bindAsEventListener(this,idTo,elementsMap[idTo]));this.trackChange(null,idTo,elementsMap[idTo])}else{this.trackChange(null,idTo,elementsMap[idTo])}}}},_config:{levels_up:1},trackChange:function(e,idTo,valuesFrom){var shouldShowUp=true;for(var idFrom in valuesFrom){var from=$(idFrom);if(valuesFrom[idFrom] instanceof Array){if(!from||valuesFrom[idFrom].indexOf(from.value)==-1){shouldShowUp=false}}else{if(!from||from.value!=valuesFrom[idFrom]){shouldShowUp=false}}}if(shouldShowUp){var currentConfig=this._config;$(idTo).up(this._config.levels_up).select("input","select","td").each(function(item){if((!item.type||item.type!="hidden")&&!($(item.id+"_inherit")&&$(item.id+"_inherit").checked)&&!(currentConfig.can_edit_price!=undefined&&!currentConfig.can_edit_price)){item.disabled=false}});$(idTo).up(this._config.levels_up).show()}else{$(idTo).up(this._config.levels_up).select("input","select","td").each(function(item){if((!item.type||item.type!="hidden")&&!($(item.id+"_inherit")&&$(item.id+"_inherit").checked)){item.disabled=true}});$(idTo).up(this._config.levels_up).hide()}}};