<?xml version="1.0"?>

<config>
    <modules>
        <Tatva_Customer>
            <version>0.1.1</version>
        </Tatva_Customer>
    </modules>
    <global>
        <resources>
            <tatvacustomer_setup>
                <setup>
                    <module>Tatva_Customer</module>
                    <class>Mage_Eav_Model_Entity_Setup</class>
                </setup>
                <connection>
                    <use>core_setup</use>
                </connection>
            </tatvacustomer_setup>
            <tatvacustomer_write>
                <connection>
                    <use>core_write</use>
                </connection>
            </tatvacustomer_write>
            <tatvacustomer_read>
                <connection>
                    <use>core_read</use>
                </connection>
            </tatvacustomer_read>
        </resources>
        <fieldsets>
            <sales_copy_order_billing_address>
                <mobilephone><to_order>*</to_order></mobilephone>
				<digital_to_access><to_order>*</to_order></digital_to_access>
				<entry_phone><to_order>*</to_order></entry_phone>
            </sales_copy_order_billing_address>
            <sales_copy_order_shipping_address>
                <mobilephone><to_order>*</to_order></mobilephone>
				<digital_to_access><to_order>*</to_order></digital_to_access>
				<entry_phone><to_order>*</to_order></entry_phone>
            </sales_copy_order_shipping_address>
            <sales_convert_quote_address>
                <mobilephone><to_order_address>*</to_order_address><to_customer_address>*</to_customer_address></mobilephone>
				<digital_to_access><to_order_address>*</to_order_address><to_customer_address>*</to_customer_address></digital_to_access>
                <entry_phone><to_order_address>*</to_order_address><to_customer_address>*</to_customer_address></entry_phone>
			</sales_convert_quote_address>
            <sales_convert_order_address>
                <mobilephone><to_quote_address>*</to_quote_address></mobilephone>
				<digital_to_access><to_quote_address>*</to_quote_address></digital_to_access>
				<entry_phone><to_quote_address>*</to_quote_address></entry_phone>
            </sales_convert_order_address>
            <customer_address>
                 <mobilephone><to_quote_address>*</to_quote_address></mobilephone>
				 <digital_to_access><to_quote_address>*</to_quote_address></digital_to_access>
				 <entry_phone><to_quote_address>*</to_quote_address></entry_phone>
            </customer_address>
            <checkout_onepage_billing>
                <mobilephone><to_customer>*</to_customer></mobilephone>
				<digital_to_access><to_customer>*</to_customer></digital_to_access>
				<entry_phone><to_customer>*</to_customer></entry_phone>
            </checkout_onepage_billing>
        </fieldsets>
        <models>
            <tatvacustomer>
                <class>Tatva_Customer_Model</class>
            </tatvacustomer>
            <customer>
				<rewrite>
	 				<address>Tatva_Customer_Model_Address</address>
	 			</rewrite>
 			</customer>
        </models>
        <blocks>
              <tatvacustomer><class>Tatva_Customer_Block</class></tatvacustomer>    
           </blocks>
        <rewrite>
        	 <!--<tatva_customer_adress_formpost>
        		 <from><![CDATA[#^/customer/address/formPost/#]]></from>
        		 <to>/tatvacustomer/address/formPost/</to>
        	 </tatva_customer_adress_formpost>-->
          <!--  <tatva_customer_account_createpost>
        		 <from><![CDATA[#^/customer/account/createpost/#]]></from>
        		 <to>/tatvacustomer/account/createPost/</to>
        	 </tatva_customer_account_createpost>-->
       </rewrite>
    </global>
    <admin>
        <fieldsets>
            <customer_dataflow>
                <mobilephone><billing>1</billing><shipping>1</shipping></mobilephone>
            </customer_dataflow>
        </fieldsets>
    </admin>
     <default>
        <customer>
            <address_templates>
                <text>
                    {{depend prefix}}{{var prefix}} {{/depend}}{{var firstname}} {{depend middlename}}{{var middlename}} {{/depend}}{{var lastname}}{{depend suffix}} {{var suffix}}{{/depend}}
                    {{depend company}}{{var company}}{{/depend}}
                    {{if street1}}{{var street1}}
                    {{/if}}
                    {{depend street2}}{{var street2}}{{/depend}}
                    {{depend street3}}{{var street3}}{{/depend}}
                    {{depend street4}}{{var street4}}{{/depend}}
                    {{if city}}{{var city}},  {{/if}}{{if region}}{{var region}}, {{/if}}{{if postcode}}{{var postcode}}{{/if}}
                    {{var country}}
                    {{depend telephone}}T: {{var telephone}}{{/depend}}
                    {{depend mobilephone}}M: {{var mobilephone}}{{/depend}}
                    {{depend fax}}F: {{var fax}}{{/depend}}
                </text>
                <oneline>
                    {{depend prefix}}{{var prefix}} {{/depend}}{{var firstname}} {{depend middlename}}{{var middlename}} {{/depend}}{{var lastname}}{{depend suffix}} {{var suffix}}{{/depend}}, {{var street}}, {{var city}}, {{var region}} {{var postcode}}, {{var country}}
                </oneline>
                <html>
                    {{depend prefix}}{{var prefix}} {{/depend}}{{var firstname}} {{depend middlename}}{{var middlename}} {{/depend}}{{var lastname}}{{depend suffix}} {{var suffix}}{{/depend}}&lt;br/&gt;
                    {{depend company}}{{var company}}&lt;br /&gt;{{/depend}}
                    {{if street1}}{{var street1}}&lt;br /&gt;{{/if}}
                    {{depend street2}}{{var street2}}&lt;br /&gt;{{/depend}}
                    {{depend street3}}{{var street3}}&lt;br /&gt;{{/depend}}
                    {{depend street4}}{{var street4}}&lt;br /&gt;{{/depend}}
                    {{if city}}{{var city}},  {{/if}}{{if region}}{{var region}}, {{/if}}{{if postcode}}{{var postcode}}{{/if}}&lt;br/&gt;
                    {{var country}}&lt;br/&gt;
                    {{depend telephone}}T: {{var telephone}}&lt;br/&gt;{{/depend}}
                    {{depend mobilephone}}M: {{var mobilephone}}{{/depend}}
                    {{depend fax}}&lt;br/&gt;F: {{var fax}}{{/depend}}
                </html>
                <pdf>
                    {{depend prefix}}{{var prefix}} {{/depend}}{{var firstname}} {{depend middlename}}{{var middlename}} {{/depend}}{{var lastname}}{{depend suffix}} {{var suffix}}{{/depend}}|
                    {{depend company}}{{var company}}|{{/depend}}
                    {{if street1}}{{var street1}}
                    {{/if}}
                    {{depend street2}}{{var street2}}|{{/depend}}
                    {{depend street3}}{{var street3}}|{{/depend}}
                    {{depend street4}}{{var street4}}|{{/depend}}
                    {{if city}}{{var city}},|{{/if}}
                    {{if region}}{{var region}}, {{/if}}{{if postcode}}{{var postcode}}{{/if}}|
                    {{var country}}|
                    {{depend telephone}}T: {{var telephone}} | {{/depend}}
                    {{depend mobilephone}}M: {{var mobilephone}}{{/depend}}
                    {{depend fax}}| F: {{var fax}}{{/depend}}
                </pdf>
                <js_template>#{prefix} #{firstname} #{middlename} #{lastname} #{suffix}&lt;br/&gt;#{company}&lt;br/&gt;#{street0}&lt;br/&gt;#{street1}&lt;br/&gt;#{street2}&lt;br/&gt;#{street3}&lt;br/&gt;#{city}, #{region}, #{postcode}&lt;br/&gt;#{country_id}&lt;br/&gt;T: #{telephone}&lt;br/&gt;M: #{mobilephone}&lt;br/&gt;F: #{fax}</js_template>
            </address_templates>
        </customer>
    </default>
    <frontend>
        <routers>
            <tatva>
                <use>standard</use>
                <args>
                    <module>Tatva_Customer</module>
                    <frontName>tatvacustomer</frontName>
                </args>
            </tatva>
            <customer>
                <args>
                    <modules>
                        <tatva_customer before="Mage_Customer">Tatva_Customer</tatva_customer>
                    </modules>
                </args>
            </customer>
        </routers>
        <translate>
            <modules>
                <Tatva_Customer>
                    <files>
                        <default>Tatva_Customer.csv</default>
                    </files>
                </Tatva_Customer>
            </modules>
        </translate> 
    </frontend>
</config>